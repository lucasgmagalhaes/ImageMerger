{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://program/./src/utils.ts","webpack://program/./node_modules/merge-images/dist/index.es2015.js","webpack://program/webpack/bootstrap","webpack://program/webpack/runtime/define property getters","webpack://program/webpack/runtime/hasOwnProperty shorthand","webpack://program/webpack/runtime/make namespace object","webpack://program/./src/index.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable @typescript-eslint/no-namespace */\n\nexport namespace fileList {\n  export function filter(files: FileList, fn: (file: File) => boolean) {\n    const filesToReturn = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      if (fn(file)) {\n        filesToReturn.push(file);\n      }\n    }\n    return filesToReturn;\n  }\n\n  export function map<U>(files: FileList, fn: (file: File) => U) {\n    const filesToReturn: U[] = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      filesToReturn.push(fn(file));\n    }\n    return filesToReturn;\n  }\n}\n\n","// Defaults\nvar defaultOptions = {\n\tformat: 'image/png',\n\tquality: 0.92,\n\twidth: undefined,\n\theight: undefined,\n\tCanvas: undefined,\n\tcrossOrigin: undefined\n};\n\n// Return Promise\nvar mergeImages = function (sources, options) {\n\tif ( sources === void 0 ) sources = [];\n\tif ( options === void 0 ) options = {};\n\n\treturn new Promise(function (resolve) {\n\toptions = Object.assign({}, defaultOptions, options);\n\n\t// Setup browser/Node.js specific variables\n\tvar canvas = options.Canvas ? new options.Canvas() : window.document.createElement('canvas');\n\tvar Image = options.Image || window.Image;\n\n\t// Load sources\n\tvar images = sources.map(function (source) { return new Promise(function (resolve, reject) {\n\t\t// Convert sources to objects\n\t\tif (source.constructor.name !== 'Object') {\n\t\t\tsource = { src: source };\n\t\t}\n\n\t\t// Resolve source and img when loaded\n\t\tvar img = new Image();\n\t\timg.crossOrigin = options.crossOrigin;\n\t\timg.onerror = function () { return reject(new Error('Couldn\\'t load image')); };\n\t\timg.onload = function () { return resolve(Object.assign({}, source, { img: img })); };\n\t\timg.src = source.src;\n\t}); });\n\n\t// Get canvas context\n\tvar ctx = canvas.getContext('2d');\n\n\t// When sources have loaded\n\tresolve(Promise.all(images)\n\t\t.then(function (images) {\n\t\t\t// Set canvas dimensions\n\t\t\tvar getSize = function (dim) { return options[dim] || Math.max.apply(Math, images.map(function (image) { return image.img[dim]; })); };\n\t\t\tcanvas.width = getSize('width');\n\t\t\tcanvas.height = getSize('height');\n\n\t\t\t// Draw images to canvas\n\t\t\timages.forEach(function (image) {\n\t\t\t\tctx.globalAlpha = image.opacity ? image.opacity : 1;\n\t\t\t\treturn ctx.drawImage(image.img, image.x || 0, image.y || 0);\n\t\t\t});\n\n\t\t\tif (options.Canvas && options.format === 'image/jpeg') {\n\t\t\t\t// Resolve data URI for node-canvas jpeg async\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tcanvas.toDataURL(options.format, {\n\t\t\t\t\t\tquality: options.quality,\n\t\t\t\t\t\tprogressive: false\n\t\t\t\t\t}, function (err, jpeg) {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(jpeg);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Resolve all other data URIs sync\n\t\t\treturn canvas.toDataURL(options.format, options.quality);\n\t\t}));\n});\n};\n\nexport default mergeImages;\n//# sourceMappingURL=index.es2015.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable prefer-spread */\nimport mergeImages from \"merge-images\";\nimport { fileList } from \"./utils\";\n\ninterface Folder {\n  folderName: string\n  files: string[];\n}\n\nconst imgs = new Array<string>();\n\nconst folders = new Array<Folder>();\n\nfunction init() {\n  const filePicker = document.getElementById(\"filepicker\");\n  filePicker?.addEventListener(\"change\", function (event) {\n    const output = document.getElementById(\"listing\");\n    const files = (event.target as HTMLInputElement)?.files;\n\n    if (!files) {\n      return;\n    }\n\n    console.log(files);\n\n    /**\n     * First I get all folders\n     * As path will be like \"img/folder/img.png\" and \"img/folder2/img.png\"\n     * I only need the second element of the array.\n     */\n    const foldersName = fileList.map(files, (file => getFolderName(file)));\n\n    foldersName.forEach(f => folders.push({\n      folderName: f,\n      files: []\n    }))\n\n    const urls = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const folderName = getFolderName(file);\n      const folder = folders.find(f => f.folderName == folderName);\n\n      if (!folder) {\n        throw new Error(\"Folder not found for \" + folderName);\n      }\n\n      const url = URL.createObjectURL(file);\n      urls.push(url);\n      folder.files.push(url);\n    }\n\n    addLoadedFiles(urls);\n  }, false);\n}\n\nfunction getFolderName(file: File) {\n  return file.webkitRelativePath.split(\"/\")[1];\n}\n\nfunction addLoadedFiles(urls: string[]) {\n  const div = getLoadFilesContainer();\n  div.append(...urls.map(u => createImg(u)));\n}\n\nfunction createImg(src: string) {\n  const img = document.createElement(\"img\");\n  img.classList.add(\"loaded-img\");\n  img.src = src;\n  return img;\n}\n\nfunction getLoadFilesContainer() {\n  return document.querySelector(\".loaded-img-container\") as HTMLDivElement;\n}\n\nfunction getGeneratedFilesContainer() {\n  return document.querySelector(\".generated-img-container\") as HTMLDivElement;\n}\n\nfunction getFile(folderIndex: number, fileIndex: number) {\n  return folders[folderIndex].files[fileIndex];\n}\n\nwindow.generate = () => {\n\n  _generate(0);\n\n\n  // const div = getGeneratedFilesContainer();\n  // const b64 = await mergeImages(imgs);\n  // const img = createImg(b64);\n  // div.append(img);\n}\n\nexport function _generate(folderIndex: number, ...gotFiles: string[]) {\n  if (folderIndex > folders.length - 1 && gotFiles.length == folders.length) {\n    mergeImages(gotFiles).then(console.log);\n    return;\n  }\n\n  for (let index = 0; index < folders[folderIndex].files.length; index++) {\n    _generate(folderIndex + 1, folders[folderIndex].files[index]);\n  }\n}\n\nfunction getAmountOfIterations() {\n  return folders.map(f => f.files.length).reduce((a, b) => a * b);\n}\n\n\ninit();\n"],"names":["filter","files","fn","filesToReturn","i","length","file","push","map","fileList","mergeImages","imgs","Array","folders","init","filePicker","document","getElementById","addEventListener","event","output","target","console","log","foldersName","getFolderName","forEach","f","folderName","urls","folder","find","Error","url","URL","createObjectURL","addLoadedFiles","webkitRelativePath","split","div","getLoadFilesContainer","append","u","createImg","src","img","createElement","classList","add","querySelector","getGeneratedFilesContainer","getFile","folderIndex","fileIndex","window","generate","_generate","gotFiles","then","index","getAmountOfIterations","reduce","a","b"],"sourceRoot":""}